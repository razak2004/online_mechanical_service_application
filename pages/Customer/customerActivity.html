<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Customer Notifications</title>
    <link
      rel="stylesheet"
      href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined:opsz,wght,FILL,GRAD@20..48,100..700,0..1,-50..200"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Lexend+Deca&display=swap"
      rel="stylesheet"
    />
    <link rel="stylesheet" href="../../assets/css/customer.css" />
    <link rel="stylesheet" href="../../assets/css/customerActivity.css" />
    <style>
      /*  */
      section {
        display: flex;
        flex-direction: column;
        align-items: center;
        width: 400px;
        height: 600px;
        border: 2px solid black;
        margin-top: 20px;
        background-color: white;
        border-radius: 50px;
      }
      section img {
        width: 250px;
        height: 400px;
      }
      button {
        width: 200px;
        height: 60px;
        border-radius: 20px;
        border: 3px solid black;
        background-color: #fe3044;
        color: white;
        /* margin-top: 10px; */
        font-size: 20px;
      }
      .timer {
        font-size: 15px;
        font-weight: bold;
        text-align: center;
        display: flex;
        align-items: center;
        margin-bottom: 20px;
        gap: 3%;
        width: 70%;
      }
      span {
        font-size: 25px;
        /* color: rgb(0, 255, 0); */
      }
      #notFind {
        display: none;
      }
      #notFind button {
        margin-top: 20px;
      }
    </style>
  </head>
  <body>
    <nav>
      <img src="../../assets/images/logo.png" alt="logo" />
      <ul>
        <li>
          <a href="./cust.html">
            <i class="material-symbols-outlined"> dashboard </i>
            <p>Home</p>
          </a>
        </li>

        <li>
          <a href="" style="background-color: white; color: #fe3044">
            <i class="material-symbols-outlined"> activity_zone </i>
            <p>Your Activity</p>
          </a>
        </li>
        <li>
          <a href="#">
            <i class="material-symbols-outlined"> shopping_cart </i>
            <p>Our Products</p>
          </a>
        </li>
        <li>
          <a href="./showprofile.html">
            <i class="material-symbols-outlined"> account_circle </i>
            <p>Profile</p>
          </a>
        </li>
        <li>
          <a href="./customerNotification.html">
            <i class="material-symbols-outlined"> notifications </i>
            <p>Notifications</p>
          </a>
        </li>
        <li>
          <a href="" id="settings">
            <i class="material-symbols-outlined"> settings </i>
            <p>Settings</p>
          </a>
        </li>
        <li>
          <a href="../../index.html">
            <i class="material-symbols-outlined"> logout </i>
            <div>log Out</div>
          </a>
        </li>
      </ul>
    </nav>
    <div class="sectionDiv">
      <h2 id="bookingNotfound" style="display: none"></h2>
      <div class="waitingCard">
        <img src="../../assets/images/customer/way.gif" alt="" />
        <h4 id="workshopNo">
          Searching Workshops
          <i class="material-symbols-outlined"> settings_input_antenna </i>
        </h4>
        <button id="cancelButton">Cancel Request</button>
      </div>
      <div class="workshopContain" id="container"></div>
    </div>

    <script src="../../assets/javascript/customerBookingApi.js"></script>

    <script>
      let bookingId = localStorage.getItem("livebookingId");
      if (bookingId == null) {
        const h2 = document.getElementById("bookingNotfound");
        h2.style.display = "flex";
        const waitingCard = document.querySelector(".waitingCard");
        waitingCard.style.display = "none";

        h2.innerText = "No live bookings available";
      } else {
        let i = 0;
        let nearWorkshops = findNearByWorkshopsApi(bookingId);
        nearWorkshops.sort((a, b) => a.distance - b.distance);

        const intervalId = setInterval(() => {
          if (i < 3) {
            let h2 = document.getElementById("workshopNo");
            h2.innerText = "Founded " + (i + 1) + " Workshop near you";
            oneWorkshopCard(nearWorkshops[i], "container");
          }
          i++;
        }, 6000);

        console.log("near workshops", nearWorkshops);
      }
    </script>
  </body>
</html>
